# Heady Ecosystem

Welcome to the Heady Ecosystem monorepo. This repository contains the source code for **HeadyConnection** (non-profit) and **HeadySystems** (C-Corp), along with the **Heady Automation IDE (Comet)**.

## üåå Ecosystem Overview
- **HeadyConnection**: Public-facing non-profit platform focused on social impact.
- **HeadySystems**: Commercial product portal and technology provider.
- **Comet (Automation IDE)**: Internal developer tool for headless browser automation and task management.

The two entities share a common infrastructure and design system (`packages/ui`) but maintain strict data separation in deployment.

## üöÄ Quick Start

### Prerequisites
- **Node.js** (v20+ LTS)
- **pnpm** (`npm install -g pnpm`)
- **Docker Desktop** (optional, for full containerized env)
- **Python 3.x** (for management scripts)
- **Git** (for cloning and version control)

### 1. Clone & Bootstrap
```bash
# Clone the repository
git clone https://github.com/HeadySystems/heady-automation-ide.git
cd HeadySystems

# Install dependencies
pnpm install
```

### 2. Configure Environment
```bash
# Copy environment template
cp .env.example .env.local

# Edit .env.local with your API keys:
# - HC_AUTOMATION_API_KEY: Generate a secure key for API authentication
# - ANTHROPIC_API_KEY: For Jules AI integration
# - GITHUB_TOKEN: For Copilot and Gists
# - HUGGINGFACE_TOKEN: For ML model access
# - Database credentials (auto-generated by scripts/generate_missing_secrets.py)
```

### 3. Setup Desktop Shortcuts
Create secure launch icons on your Desktop:
```bash
npm run setup:desktop
```
This creates:
- **Launch Heady IDE**: Opens the automation IDE in dev mode with `.env.local` loaded
- **Start Heady Docker**: Starts the full dockerized stack (Postgres, Redis, IDE)

### 4. Development Modes

#### Option A: Local Dev Run the development server for the Automation IDE:
```bash
pnpm dev --filter heady-automation-ide
```
Access points:
- IDE UI (Vite): http://localhost:5173
- IDE API (Express): http://localhost:4100/api/health

#### Option B: Docker Mode (Full stack with database)
```bash
docker-compose up -d --build
```
Services:
- IDE: http://localhost:4100
- PostgreSQL: localhost:5432
- Redis: localhost:6379

#### Option C: Full Deployment Script
```powershell
./scripts/deploy_heady_full_stack.ps1
```
This automated script:
1. ‚úÖ Checks prerequisites (Node, pnpm, Docker)
2. üîê Audits/Generates secrets (`.env.local`)
3. üì¶ Installs dependencies
4. üèóÔ∏è Builds the project
5. üê≥ Starts Docker containers
6. ‚úÖ Verifies health endpoints

Docker mode serves the IDE UI + API from: http://localhost:4100

### 5. Windsurf Integration
See the Windsurf integration prompt and MCP setup notes in:
`docs/WINDSURF_INTEGRATION.md`

## üìÇ Repository Structure

```
HeadySystems/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ heady-automation-ide/  # "Comet" IDE (Node/React/Playwright)
‚îÇ   ‚îú‚îÄ‚îÄ web-heady-connection/  # (Planned) Nonprofit App
‚îÇ   ‚îî‚îÄ‚îÄ web-heady-systems/     # (Planned) Commercial App
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                    # Shared UI Components
‚îÇ   ‚îî‚îÄ‚îÄ core-domain/           # Business Logic
‚îú‚îÄ‚îÄ scripts/                   # DevOps & Management Scripts
‚îú‚îÄ‚îÄ docker-compose.yml         # Container Definition
‚îú‚îÄ‚îÄ package.json               # Root scripts
‚îî‚îÄ‚îÄ pnpm-workspace.yaml        # Monorepo config
```

## ü§ñ MCP Service Integration

The Heady Automation IDE integrates with multiple **Model Context Protocol (MCP)** services for AI-assisted development:

### Configured Services (`.mcp/config.json`)

1. **Heady MCP** - Core automation service with Phi token support for sacred geometry-inspired design systems
2. **GitHub Copilot** - AI coding assistance and autocomplete
3. **Jules (Anthropic)** - Advanced AI task execution and code generation via Claude
4. **HuggingFace** - ML model integration for inference and fine-tuning
5. **Playwright** - Browser automation toolkit for headless and interactive testing
6. **GitHub Gists** - Code snippet management and sharing

### MCP Setup

```bash
# Configure MCP services in Windsurf or compatible IDE
# Point to: .mcp/config.json

# Set required environment variables in .env.local:
ANTHROPIC_API_KEY=sk-ant-...
GITHUB_TOKEN=ghp_...
HUGGINGFACE_TOKEN=hf_...
JULES_API_KEY=your_jules_key
```

### Using MCP Services

- **Code Generation**: Ask Jules or Copilot to generate components
- **Browser Automation**: Use Playwright MCP for automated testing tasks
- **ML Integration**: Query HuggingFace models directly from the IDE
- **Snippet Management**: Save/retrieve code via GitHub Gists MCP

## üîê Security Features

### API Key Authentication
The IDE requires an API key for automation endpoints:

```bash
# Set in .env.local
HC_AUTOMATION_API_KEY=your_secure_random_key_here
```

**Usage:**
```bash
curl -X POST http://localhost:3000/api/task/screenshot \
  -H "x-api-key: your_secure_random_key_here" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com", "interactive": false}'
```

### CORS Configuration
By default, only local origins are allowed. To enable non-local origins:

```bash
# .env.local
HC_ALLOW_NONLOCAL_ORIGINS=true  # Use with caution in production
```

Allowed origins (when `HC_ALLOW_NONLOCAL_ORIGINS=false`):
- `http://localhost:3000`
- `http://127.0.0.1:3000`
- `http://localhost:5173` (Vite dev server)
- `http://127.0.0.1:5173`

### Production Security
- ‚úÖ `x-powered-by` header disabled
- ‚úÖ Strict CORS policy by default
- ‚úÖ API key authentication for automation tasks
- ‚úÖ Environment-based configuration
- ‚úÖ Static file serving only in production mode

## üõ† Tools & Standards
- **Framework**: React + Vite + Express
- **Language**: TypeScript (Strict Mode)
- **Formatting**: Prettier
- **Linting**: ESLint
- **Testing**: Vitest + Playwright
- **Package Manager**: pnpm
- **Browser Automation**: Playwright (headless + interactive modes)
- **AI Integration**: MCP protocol with multiple service providers

## üîê Secrets Management

### Development
Secrets are stored in `.env.local` (gitignored).

```bash
# Generate secure secrets automatically
Run `python scripts/generate_missing_secrets.py` to generate local dev secrets.
```

## ü§ñ AI Agent Integration (Windsurf)
This project is optimized for AI-assisted development.
See [WINDSURF_PROMPT.md](./WINDSURF_PROMPT.md) for a comprehensive prompt to onboard Windsurf or other AI agents, covering:
- MCP Service Configuration
- Automated Context Loading
- Task Execution Capabilities

### Production
- Use **1Password** vault for team secret sharing
- Use **GitHub Actions Secrets** for CI/CD
- Use **Cloud KMS** (AWS Secrets Manager, GCP Secret Manager) for deployed environments

### Secret Rotation
```bash
python scripts/rotate_secrets.py  # Rotates internal API keys
```

---
<div align="center">
  <p>Made with ‚ù§Ô∏è by Heady Systems</p>
</div>
