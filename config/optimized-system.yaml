# Heady Systems - Optimized Node Configuration
# This file configures the system for optimal connectivity, accuracy, and performance

version: "2.0.0"

system:
  name: "Heady Optimized Node System"
  deterministic: true
  seed: "heady-optimal-v2-2026"
  
optimization:
  # Routing optimization
  routing:
    strategy: "capability-match"  # Options: round-robin, least-loaded, capability-match, deterministic
    enable_failover: true
    failover_timeout_ms: 5000
    retry_attempts: 3
    
  # Performance tuning
  performance:
    max_concurrent_tasks: 100
    task_timeout_ms: 300000
    heartbeat_interval_ms: 10000
    heartbeat_timeout_ms: 30000
    compression_threshold_bytes: 1024
    batch_size: 10
    
  # Connection pooling
  connections:
    max_pool_size: 20
    idle_timeout_ms: 30000
    connection_timeout_ms: 2000
    
  # Caching
  cache:
    default_ttl_seconds: 300
    max_size: 1000
    eviction_policy: "lru"
    
  # Monitoring
  monitoring:
    enabled: true
    interval_ms: 30000
    alert_thresholds:
      cpu_percent: 80
      memory_percent: 85
      error_rate_percent: 5
      queue_depth: 100
      latency_ms: 1000

# Node registry configuration
nodes:
  # BRIDGE - Connection management
  - id: "BRIDGE"
    enabled: true
    role: "connector"
    capabilities:
      - "mcp_server"
      - "network"
      - "tunnel"
      - "load_balancer"
    max_concurrent: 10
    priority: 10
    
  # MUSE - Content generation
  - id: "MUSE"
    enabled: true
    role: "content"
    capabilities:
      - "generate_content"
      - "marketing"
      - "whitepaper"
    max_concurrent: 5
    priority: 5
    
  # SENTINEL - Security
  - id: "SENTINEL"
    enabled: true
    role: "security"
    capabilities:
      - "verify_auth"
      - "security_audit"
      - "grant_auth"
    max_concurrent: 3
    priority: 10
    
  # NOVA - Gap analysis
  - id: "NOVA"
    enabled: true
    role: "analysis"
    capabilities:
      - "scan_gaps"
      - "identify_missing"
    max_concurrent: 3
    priority: 5
    
  # OBSERVER - Monitoring
  - id: "OBSERVER"
    enabled: true
    role: "monitor"
    capabilities:
      - "monitor"
      - "metrics"
      - "alerts"
    max_concurrent: 5
    priority: 8
    
  # JANITOR - Cleanup
  - id: "JANITOR"
    enabled: true
    role: "cleanup"
    capabilities:
      - "clean_sweep"
      - "temp_cleanup"
    max_concurrent: 2
    priority: 3
    
  # JULES - Optimization
  - id: "JULES"
    enabled: true
    role: "optimizer"
    capabilities:
      - "optimize"
      - "analyze_code"
      - "refactor"
    max_concurrent: 2
    priority: 4
    
  # SOPHIA - Learning
  - id: "SOPHIA"
    enabled: true
    role: "learner"
    capabilities:
      - "learn_tool"
      - "document"
      - "extract_patterns"
    max_concurrent: 3
    priority: 4
    
  # CIPHER - Encryption
  - id: "CIPHER"
    enabled: true
    role: "crypto"
    capabilities:
      - "obfuscate"
      - "encrypt"
      - "hash"
    max_concurrent: 3
    priority: 6
    
  # ATLAS - Documentation
  - id: "ATLAS"
    enabled: true
    role: "documenter"
    capabilities:
      - "auto_doc"
      - "generate_docs"
    max_concurrent: 3
    priority: 4
    
  # MURPHY - Security audit
  - id: "MURPHY"
    enabled: true
    role: "auditor"
    capabilities:
      - "security_audit"
      - "vulnerability_scan"
    max_concurrent: 2
    priority: 7
    
  # SASHA - Brainstorming
  - id: "SASHA"
    enabled: true
    role: "creative"
    capabilities:
      - "brainstorm"
      - "ideate"
    max_concurrent: 3
    priority: 3
    
  # SCOUT - GitHub scanning
  - id: "SCOUT"
    enabled: true
    role: "scanner"
    capabilities:
      - "scan_github"
      - "repository_analysis"
    max_concurrent: 3
    priority: 4
    
  # OCULUS - Visualization
  - id: "OCULUS"
    enabled: true
    role: "visualizer"
    capabilities:
      - "visualize"
      - "generate_charts"
    max_concurrent: 2
    priority: 3
    
  # BUILDER - Project creation
  - id: "BUILDER"
    enabled: true
    role: "constructor"
    capabilities:
      - "new_project"
      - "scaffold"
    max_concurrent: 2
    priority: 5
    
  # FOREMAN - Consolidation
  - id: "FOREMAN"
    enabled: true
    role: "consolidator"
    capabilities:
      - "consolidate"
      - "merge"
      - "analyze_repo"
      - "git_status"
    max_concurrent: 3
    priority: 6

# Protocol configuration
protocol:
  version: "1.0"
  message_timeout_ms: 30000
  max_retries: 3
  enable_compression: true
  compression_threshold: 1024
  batch_messages: true
  batch_interval_ms: 100
  
  # Message priorities (higher = more important)
  priorities:
    HEARTBEAT: 10
    TASK_ASSIGN: 8
    TASK_COMPLETE: 8
    RECOVERY_REQUEST: 10
    METRICS_REPORT: 5
    CAPABILITY_UPDATE: 6

# Deterministic behavior rules
deterministic_rules:
  # Execution ordering
  execution:
    - "Sort all collections before iteration"
    - "Use seeded random number generation"
    - "Maintain consistent timestamp references within workflows"
    - "Process messages in sequence number order"
    
  # State management
  state:
    - "State updates must be atomic"
    - "Use deterministic cache keys"
    - "Serialize state in consistent format"
    - "Version all state changes"
    
  # Error handling
  errors:
    - "Retry with exponential backoff (deterministic base)"
    - "Log errors with sequence IDs"
    - "Failover to predetermined alternatives"
    - "Circuit breaker thresholds are constant"

# Health check configuration
health_checks:
  checks:
    - name: "database"
      interval_ms: 30000
      timeout_ms: 5000
      
    - name: "nodes"
      interval_ms: 10000
      timeout_ms: 3000
      
    - name: "performance"
      interval_ms: 30000
      timeout_ms: 5000
      
    - name: "connectivity"
      interval_ms: 10000
      timeout_ms: 5000

# Automatic recovery configuration
recovery:
  enabled: true
  auto_failover: true
  max_failover_attempts: 3
  recovery_timeout_ms: 60000
  
  # Node replacement strategy
  replacement:
    strategy: "capability-match"
    prefer_same_type: true
    allow_different_version: false
